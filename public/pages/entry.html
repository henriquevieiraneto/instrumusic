<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bem-vindo(a) | InstruMusic</title>

    <style>
        /* SEU CSS AQUI (MANTIDO INTACTO) */
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color:#fff; }

        body {
            min-height: 100vh;
            overflow: hidden;
            position: relative;
            background: url("https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&fit=crop&w=1920&q=90") center/cover no-repeat fixed;
        }

        /* Camada escura com blur sobre o fundo */
        body::after {
            content: "";
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.55);
            backdrop-filter: blur(3px);
            z-index: 1; /* Acima das partículas */
        }

        #particles-js {
            position: fixed;
            top:0; left:0;
            width:100%; height:100%;
            z-index: -1; /* Abaixo do body::after */
            pointer-events:none;
        }
        .form-container {
            max-width: 380px;
            margin: 130px auto 40px auto;
            /* Cor levemente azulada semi-transparente */
            background: rgba(30, 144, 255, 0.15); 
            padding: 34px;
            border-radius: 18px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.45);
            backdrop-filter: blur(18px); /* Efeito de vidro fosco */
            border: 1px solid rgba(255,255,255,0.12);
            position: relative;
            z-index:2; /* Acima do body::after e partículas */
        }


        .form-container h2 { margin-bottom:12px; font-size:1.7rem; font-weight:600; }
        .form-container p { margin-bottom:25px; color:#cccccc; font-size:1rem; }

        .btn {
            display:block;
            width:100%;
            padding:12px;
            margin:12px 0;
            border:none;
            border-radius:12px;
            font-weight:600;
            cursor:pointer;
            transition:0.25s ease;
            font-size:1rem;
            text-decoration:none;
            text-align:center;
        }

        .btn-primary {
            /* Botão claro de destaque */
            background: rgba(255,255,255,0.9);
            color: #1e1e1e;
        }
        .btn-primary:hover { background: rgba(255,255,255,1); transform: scale(1.04); }

        .btn-secondary {
            /* Botão transparente para segunda opção */
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.5);
            color: #fff;
        }
        .btn-secondary:hover { background: rgba(255,255,255,0.15); transform: scale(1.04); }

        .text-dim { display:block; margin-top:20px; color:#aaaaaa; text-decoration:none; font-size:0.9rem; transition:0.2s ease; }
        .text-dim:hover { color:#fff; }

        @media(max-width:480px){ .form-container{ margin-top:80px; padding:25px; } }
    </style>
</head>
<body>

<canvas id="particles-js"></canvas>

<div class="form-container">
    <h2>Bem-vindo à InstruMusic!</h2>
    <p>Escolha como você quer começar sua jornada musical.</p>

    <a href="/public/pages/login.html" class="btn btn-primary">Fazer Login</a>
    <a href="/public/pages/register.html" class="btn btn-secondary">Criar Conta (Cadastre-se)</a>

    <a href="/public/pages/index.html" class="text-dim">Voltar para a Página Inicial</a>
</div>

<script>
// LÓGICA DO FUNDO ANIMADO (PARTICLES.JS)
(function(){
    const canvas = document.getElementById('particles-js');
    const ctx = canvas.getContext('2d');
    if(!ctx) return;

    let DPR = window.devicePixelRatio || 1;
    let W=0, H=0;
    const particles=[];
    const PARTICLE_COUNT = 90;
    const CONNECT_DISTANCE = 120;
    const notes = ["\u266A","\u266B"]; // Símbolos ♫ ♬

    function setSize(){
        DPR = window.devicePixelRatio||1;
        W=window.innerWidth;
        H=window.innerHeight;
        canvas.style.width=W+'px';
        canvas.style.height=H+'px';
        canvas.width=Math.floor(W*DPR);
        canvas.height=Math.floor(H*DPR);
        ctx.setTransform(DPR,0,0,DPR,0,0);
    }

    function Particle(){ this.reset(); }
    Particle.prototype.reset=function(){
        this.x=Math.random()*W;
        this.y=Math.random()*H;
        this.size=Math.random()*16+8;
        this.vx=(Math.random()-0.5)*0.6;
        this.vy=(Math.random()-0.5)*0.6;
        this.alpha=0.3+Math.random()*0.7;
        this.note=notes[Math.floor(Math.random()*notes.length)];
        this.rotation=Math.random()*2*Math.PI;
        this.rotationSpeed=(Math.random()-0.5)*0.02;
    }
    Particle.prototype.update=function(){
        this.x+=this.vx;
        this.y+=this.vy;
        this.rotation+=this.rotationSpeed;

        if(this.x<-20) this.x=W+20;
        if(this.x>W+20) this.x=-20;
        if(this.y<-20) this.y=H+20;
        if(this.y>H+20) this.y=-20;
    }
    Particle.prototype.draw=function(){
        ctx.save();
        ctx.globalAlpha=this.alpha;
        ctx.translate(this.x,this.y);
        ctx.rotate(this.rotation);
        ctx.fillStyle="#fff";
        ctx.font=`${this.size}px Arial`;
        ctx.textAlign="center";
        ctx.textBaseline="middle";
        ctx.fillText(this.note,0,0);
        ctx.restore();
    }

    function connectParticles(){
        for(let i=0;i<particles.length;i++){
            for(let j=i+1;j<particles.length;j++){
                const dx=particles[i].x-particles[j].x;
                const dy=particles[i].y-particles[j].y;
                const dist=Math.sqrt(dx*dx+dy*dy);
                if(dist<CONNECT_DISTANCE){
                    ctx.beginPath();
                    ctx.strokeStyle='rgba(255,255,255,'+((1-dist/CONNECT_DISTANCE)*0.25)+')';
                    ctx.lineWidth=1;
                    ctx.moveTo(particles[i].x,particles[i].y);
                    ctx.lineTo(particles[j].x,particles[j].y);
                    ctx.stroke();
                }
            }
        }
    }

    function initParticles(){
        particles.length=0;
        for(let i=0;i<PARTICLE_COUNT;i++) particles.push(new Particle());
    }

    let rafId=null;
    function render(){
        ctx.clearRect(0,0,W,H);
        connectParticles();
        for(let p of particles) p.update(), p.draw();
        rafId=requestAnimationFrame(render);
    }

    function init(){
        setSize();
        initParticles();
        if(rafId) cancelAnimationFrame(rafId);
        render();
    }

    window.addEventListener('resize',function(){
        clearTimeout(window._particles_resize_timeout);
        window._particles_resize_timeout=setTimeout(init,120);
    });

    init();
})();
</script>

<script>
// LÓGICA DE REDIRECIONAMENTO (CHECA SE JÁ ESTÁ LOGADO)
document.addEventListener('DOMContentLoaded', () => {
    // Tenta obter o token.
    const token = localStorage.getItem('userToken');

    // Se o token existir, significa que o usuário já está logado.
    if (token) {
        console.log("Token encontrado. Redirecionando para a página inicial.");
        // Redireciona para a Home (assumindo que index.html é a página principal)
        window.location.href = '/public/pages/index.html'; 
    }
    // Se não houver token, o usuário permanece nesta página para fazer login/cadastro.
});
</script>

</body>
</html>